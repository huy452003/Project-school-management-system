2025-12-17 14:58:13 [background-preinit] DEBUG [logging] - Logging Provider: org.jboss.logging.Slf4jLoggerProvider found via system property
2025-12-17 14:58:13 [restartedMain] INFO  [QlsvApplication] - Starting QlsvApplication using Java 17.0.16 with PID 7540 (D:\project IntelliJ Ultimate\modules-parent\qlsv\target\classes started by tranhuy in D:\project IntelliJ Ultimate\modules-parent\qlsv)
2025-12-17 14:58:13 [restartedMain] DEBUG [QlsvApplication] - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-12-17 14:58:13 [restartedMain] INFO  [QlsvApplication] - No active profile set, falling back to 1 default profile: "default"
2025-12-17 14:58:17 [restartedMain] DEBUG [RxJava2OnClasspathCondition] - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-12-17 14:58:17 [restartedMain] DEBUG [ReactorOnClasspathCondition] - Reactor related Aspect extensions are not activated because Resilience4j Reactor module is not on the classpath.
2025-12-17 14:58:17 [restartedMain] DEBUG [RxJava2OnClasspathCondition] - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-12-17 14:58:17 [restartedMain] DEBUG [ReactorOnClasspathCondition] - Reactor related Aspect extensions are not activated because Resilience4j Reactor module is not on the classpath.
2025-12-17 14:58:17 [restartedMain] DEBUG [RxJava2OnClasspathCondition] - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-12-17 14:58:17 [restartedMain] DEBUG [ReactorOnClasspathCondition] - Reactor related Aspect extensions are not activated because Resilience4j Reactor module is not on the classpath.
2025-12-17 14:58:17 [restartedMain] DEBUG [RxJava2OnClasspathCondition] - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-12-17 14:58:17 [restartedMain] DEBUG [ReactorOnClasspathCondition] - Reactor related Aspect extensions are not activated because Resilience4j Reactor module is not on the classpath.
2025-12-17 14:58:17 [restartedMain] DEBUG [RxJava2OnClasspathCondition] - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-12-17 14:58:17 [restartedMain] DEBUG [ReactorOnClasspathCondition] - Reactor related Aspect extensions are not activated because Resilience4j Reactor module is not on the classpath.
2025-12-17 14:58:17 [restartedMain] DEBUG [RxJava2OnClasspathCondition] - RxJava2 related Aspect extensions are not activated, because RxJava2 is not on the classpath.
2025-12-17 14:58:17 [restartedMain] DEBUG [ReactorOnClasspathCondition] - Reactor related Aspect extensions are not activated because Resilience4j Reactor module is not on the classpath.
2025-12-17 14:58:21 [restartedMain] DEBUG [InternalLoggerFactory] - Using SLF4J as the default logging framework
2025-12-17 14:58:23 [restartedMain] WARN  [HikariConfig] - HikariPool-1 - idleTimeout has been set but has no effect because the pool is operating as a fixed size pool.
2025-12-17 14:58:24 [restartedMain] WARN  [deprecation] - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-17 14:58:24 [restartedMain] WARN  [deprecation] - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-12-17 14:58:33 [restartedMain] WARN  [JpaBaseConfiguration$JpaWebConfiguration] - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-17 14:58:33 [restartedMain] DEBUG [Mappings] - 
	c.c.Q.c.StudentController:
	{GET [/students]}: get(String,UserDto)
	{PUT [/students/{id}]}: update(Integer,UpdateEntityModel,String,UserDto)
	{GET [/students/filter]}: filter(Integer,String,String,Integer,Gender,String,String,Double,String,String,Boolean,String,UserDto)
	{DELETE [/students]}: delete(List,String,UserDto)
	{DELETE [/students/cache]}: clearCache(String,UserDto)
	{GET [/students/paged]}: getPaged(int,int,String,String,String,UserDto)
	{GET [/students/by-class/{schoolClass}]}: getBySchoolClass(String,String,UserDto)
	{GET [/students/{userId}]}: getByUserId(Integer,String,UserDto)
2025-12-17 14:58:33 [restartedMain] DEBUG [Mappings] - 
	o.s.b.a.w.s.e.BasicErrorController:
	{ [/error]}: error(HttpServletRequest)
	{ [/error], produces [text/html]}: errorHtml(HttpServletRequest,HttpServletResponse)
2025-12-17 14:58:33 [restartedMain] DEBUG [Mappings] - 'beanNameHandlerMapping' {}
2025-12-17 14:58:34 [restartedMain] DEBUG [Mappings] - 'resourceHandlerMapping' {/webjars/**=ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]], /**=ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]}
2025-12-17 14:58:34 [restartedMain] WARN  [ThymeleafAutoConfiguration$DefaultTemplateResolverConfiguration] - Cannot find template location: classpath:/templates/ (please add some templates, check your Thymeleaf configuration, or set spring.thymeleaf.check-template-location=false)
2025-12-17 14:58:35 [restartedMain] DEBUG [Loggers] - Using Slf4j logging framework
2025-12-17 14:58:38 [restartedMain] INFO  [QlsvApplication] - Started QlsvApplication in 25.508 seconds (process running for 26.508)
2025-12-17 14:58:40 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-C-1] WARN  [LoggingServiceImp] - [qlsv] UserConsumerService - User or user type is null in event. Skipping.
2025-12-17 14:58:51 [http-nio-8080-exec-2] WARN  [ExceptionHandlerExceptionResolver] - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in org.springframework.http.ResponseEntity<com.model_shared.models.Response<com.model_shared.models.user.EntityModel>> com.common.QLSV.controllers.StudentController.update(java.lang.Integer,com.model_shared.models.user.UpdateEntityModel,java.lang.String,com.model_shared.models.user.UserDto) with 4 errors: [Field error in object 'updateEntityModel' on field 'user.phoneNumber': rejected value [null]; codes [NotNull.updateEntityModel.user.phoneNumber,NotNull.user.phoneNumber,NotNull.phoneNumber,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateEntityModel.user.phoneNumber,user.phoneNumber]; arguments []; default message [user.phoneNumber]]; default message [Số điện thoại là bắt buộc.]] [Field error in object 'updateEntityModel' on field 'user.phoneNumber': rejected value [null]; codes [NotBlank.updateEntityModel.user.phoneNumber,NotBlank.user.phoneNumber,NotBlank.phoneNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateEntityModel.user.phoneNumber,user.phoneNumber]; arguments []; default message [user.phoneNumber]]; default message [Số điện thoại không được để trống.]] [Field error in object 'updateEntityModel' on field 'user.email': rejected value [null]; codes [NotNull.updateEntityModel.user.email,NotNull.user.email,NotNull.email,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateEntityModel.user.email,user.email]; arguments []; default message [user.email]]; default message [Email là bắt buộc.]] [Field error in object 'updateEntityModel' on field 'user.email': rejected value [null]; codes [NotBlank.updateEntityModel.user.email,NotBlank.user.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateEntityModel.user.email,user.email]; arguments []; default message [user.email]]; default message [Email không được để trống.]] ]
2025-12-17 14:59:18 [http-nio-8080-exec-4] DEBUG [LoggingServiceImp] - [security_shared] SecurityService - Calling security module with URL: http://localhost:8083/auth/validate to validate token
2025-12-17 14:59:18 [http-nio-8080-exec-4] DEBUG [LoggingServiceImp] - [security_shared] SecurityService - Successfully retrieved user from security module: admin and cached in Redis with key: user:token:eyJhbGciOiJIUzM4NCJ9.eyJyb2xlIjoiQURNSU4iLCJwZXJtaXNzaW9ucyI6WyJTVFVERU5UX1dSSVRFIiwiVEVBQ0hFUl9XUklURSIsIlNUVURFTlRfUkVBRCIsIlRFQUNIRVJfREVMRVRFIiwiU1RVREVOVF9ERUxFVEUiLCJURUFDSEVSX1JFQUQiXSwic3ViIjoiYWRtaW4iLCJqdGkiOiIzMTBmYTVhYi04YzA5LTRhM2YtODU5MC04NGJjOTA4OTdlMDQiLCJpYXQiOjE3NjU5NTgzMTEsImV4cCI6MTc2NTk2MTkxMX0.V_Qi2J9L9lJNk9kPPw7CMlvpS-WMzKJGTSHoOUt86Q1e9hT4TUN5O4kXPok8oMTP
2025-12-17 14:59:18 [http-nio-8080-exec-4] DEBUG [LoggingServiceImp] - [security_shared] SecurityService - User admin successfully authorized
2025-12-17 14:59:18 [http-nio-8080-exec-4] DEBUG [LoggingServiceImp] - [security_shared] RequiresAuthAspect - User admin successfully authorized for method: update with roles: ADMIN, STUDENT, TEACHER and permissions: STUDENT_WRITE, TEACHER_WRITE
2025-12-17 14:59:18 [http-nio-8080-exec-4] DEBUG [RateLimiterAspect] - Created or retrieved rate limiter 'student-update-controller' with period: 'PT1M'; limit for period: '30'; timeout: 'PT0S'; method: 'com.common.QLSV.controllers.StudentController#update'
2025-12-17 14:59:18 [http-nio-8080-exec-4] INFO  [LoggingServiceImp] - [qlsv] StudentController - Update students API called successfully by user: admin
2025-12-17 14:59:18 [http-nio-8080-exec-4] DEBUG [CircuitBreakerAspect] - Created or retrieved circuit breaker 'qlsv-service' with failure rate '50.0' for method: 'com.common.QLSV.services.imp.StudentServiceImp#update'
2025-12-17 14:59:18 [http-nio-8080-exec-4] INFO  [LoggingServiceImp] - [qlsv] StudentServiceImp - Graduate status updated by ADMIN (admin) for student userId: 7
2025-12-17 14:59:18 [http-nio-8080-exec-4] INFO  [LoggingServiceImp] - [qlsv] StudentServiceImp - Score updated by ADMIN (admin) for student userId: 7
2025-12-17 14:59:18 [http-nio-8080-exec-4] INFO  [LoggingServiceImp] - [qlsv] StudentServiceImp - Student ID: 4, Operation: UPDATE
2025-12-17 14:59:18 [http-nio-8080-exec-4] INFO  [LoggingServiceImp] - [qlsv] StudentServiceImp - Update student userId: 7 Successfully
2025-12-17 14:59:18 [http-nio-8080-exec-4] DEBUG [CircuitBreakerAspect] - Created or retrieved circuit breaker 'security-service' with failure rate '50.0' for method: 'com.security_shared.services.SecurityService#updateUser'
2025-12-17 14:59:18 [http-nio-8080-exec-4] DEBUG [LoggingServiceImp] - [security_shared] SecurityService - Calling security internal API to update user: 7
2025-12-17 14:59:19 [http-nio-8080-exec-4] DEBUG [LoggingServiceImp] - [security_shared] SecurityService - Successfully updated user: 7
2025-12-17 14:59:19 [http-nio-8080-exec-4] DEBUG [CircuitBreakerStateMachine] - CircuitBreaker 'security-service' succeeded:
2025-12-17 14:59:19 [http-nio-8080-exec-4] INFO  [LoggingServiceImp] - [qlsv] StudentServiceImp - Update user data for userId: 7
2025-12-17 14:59:19 [http-nio-8080-exec-4] INFO  [LoggingServiceImp] - [qlsv] StudentServiceImp - Invalidated all student caches after update userId: 7
2025-12-17 14:59:19 [http-nio-8080-exec-4] DEBUG [CircuitBreakerStateMachine] - CircuitBreaker 'qlsv-service' succeeded:
