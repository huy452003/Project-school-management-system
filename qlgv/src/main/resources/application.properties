spring.application.name=QLGV

server.port=8081

spring.datasource.url=jdbc:mysql://localhost:3306/qlgv
spring.datasource.username=root
spring.datasource.password=huy12345
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.minimum-idle=10
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000

# Redis config
spring.cache.type=redis
spring.data.redis.host=localhost
spring.data.redis.port=6379

# ========================================
# LOGGING CONFIGURATION
# ========================================

# Root logging level
logging.level.root=DEBUG

# Spring Boot internal logging (giảm noise)
logging.level.org.springframework=WARN
logging.level.org.hibernate=WARN
logging.level.org.apache=WARN

# Database connection pool logging
logging.level.com.zaxxer.hikari=WARN
logging.level.com.zaxxer.hikari.pool=WARN

# Redis client logging
logging.level.io.lettuce=WARN
logging.level.io.netty=WARN

# JDK security logging
logging.level.jdk.event.security=WARN

# MySQL driver logging
logging.level.com.mysql=WARN

# JMX/RMI logging (monitoring tools)
logging.level.javax.management=WARN
logging.level.javax.management.mbeanserver=WARN
logging.level.sun.rmi=WARN
logging.level.java.management=WARN

# Spring Boot Actuator logging
logging.level.org.springframework.boot.actuate=WARN

# HTTP connection logging
logging.level.sun.net.www.protocol.http=WARN

# Redisson Redis client logging
logging.level.org.redisson=WARN

# Console pattern với màu sắc và thời gian
logging.pattern.console=%clr([%d{yyyy-MM-dd HH:mm:ss.SSS}]){green} %clr([%-5level]){magenta} %clr(%logger{0}){cyan} - %clr(%msg){default}%n
spring.output.ansi.enabled=always
logging.pattern.console.ansi=true

# File pattern
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%t] %-5level [%logger{0}] - %msg%n

# QLGV specific logging file location
logging.file.name=../logs/qlgv-application.log
logging.file.max-size=10MB
logging.file.max-history=5

# JWT Configuration - MUST be identical to security module
jwt.secret=5367566B59703373367639792F423F4528482B4D6251655468576D5A71347437
jwt.expiration=3600000
jwt.refresh-expiration=604800000

# ========================================
# KAFKA CONSUMER CONFIGURATION
# ========================================

# Kafka Bootstrap Servers
spring.kafka.bootstrap-servers=localhost:9092

# Consumer Configuration
spring.kafka.consumer.group-id=qlgv-group-new
spring.kafka.consumer.auto-offset-reset=latest
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer

# JSON Deserializer Configuration
spring.kafka.consumer.properties.spring.json.trusted.packages=com.kafka_shared.models
spring.kafka.consumer.properties.spring.json.type.mapping=studentEvent:com.kafka_shared.models.StudentEvent

# Consumer Properties
spring.kafka.consumer.enable-auto-commit=true
spring.kafka.consumer.auto-commit-interval-ms=1000
spring.kafka.consumer.session-timeout-ms=30000
spring.kafka.consumer.heartbeat-interval-ms=10000

# Listener Configuration
spring.kafka.listener.ack-mode=batch
spring.kafka.listener.concurrency=1
spring.kafka.listener.poll-timeout=3000

# ========================================
# KAFKA TOPICS CONFIGURATION
# ========================================

# Kafka Topics
kafka.topics.student-events=student-events
kafka.topics.teacher-events=teacher-events
kafka.topics.user-events=user-events

# DLQ Topics (optional - có default values)
kafka.topics.student-events-dlq=student-events-dlq
kafka.topics.teacher-events-dlq=teacher-events-dlq
kafka.topics.user-events-dlq=user-events-dlq
